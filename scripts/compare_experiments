#!/bin/bash

if [ $# != 3 ]; then
	echo "Usage: compare_experiments example_old example_new iterations"
	exit 1
fi

old=$(basename $1)
new=$(basename $2)

# For generating plots
#python3 scripts/plot_results.py $1/config.txt $1/results.csv logs/"$old"_plot.png

for i in $(seq 1 $3); do
	echo "Experiment iteration $i"

	scripts/run_example $2
	cat fitnesses.csv >> logs/"$old"_"$new"_no_kt.csv

	python3 scripts/plot_experiment.py logs/"$old"_"$new"_no_kt.csv logs/"$old"_"$new"_kt.csv logs/"$old"_"$new"_transfer.png

	scripts/run_example $1
	scripts/transfer_example $2 $1
	cat fitnesses.csv >> logs/"$old"_"$new"_kt.csv

	python3 scripts/plot_experiment.py logs/"$old"_"$new"_no_kt.csv logs/"$old"_"$new"_kt.csv logs/"$old"_"$new"_transfer.png
done
